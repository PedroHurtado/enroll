openapi: 3.0.0
info:
  title: Enroll API
  version: 1.0.0
paths:
  /enrolls:
    post:
      summary: Crear un nuevo registro de inscripción
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostEnroll'
      responses:
        '201':
          description: Inscripción creada con éxito
  /enrolls/{id}/alumn:
    put:
      summary: Actualizar datos del alumno
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Alumn'
      responses:
        '204':
          description: Datos del alumno actualizados correctamente
  /enrolls/{id}/familysituation:
    put:
      summary: Actualizar situación familiar
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FilesArray'  # Asegúrate de que esto sea correcto
      responses:
        '204':
          description: Situación familiar actualizada
  /enrolls/{id}/mother:
    put:
      summary: Actualizar datos de la madre
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Mother'
      responses:
        '204':
          description: Datos de la madre actualizados
  /enrolls/{id}/father:
    put:
      summary: Actualizar datos del padre
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Father'
      responses:
        '204':
          description: Datos del padre actualizados
  /enrolls/{id}/other:
    put:
      summary: Actualizar otros datos
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FilesArray'  # Ahora es un array de archivos
      responses:
        '204':
          description: Otros datos actualizados
  /enrolls/{id}/health:
    put:
      summary: Actualizar datos de salud
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Health'
      responses:
        '204':
          description: Datos de salud actualizados
  /enrolls/{id}/confirm:
    put:
      summary: Confirmar datos
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Confirm'
      responses:
        '204':
          description: Confirmación realizada

components:
  schemas:
    PostEnroll:
      type: object
      properties:
        identity:
          type: string
          enum: [student, mother, father, guardian]
        situation:
          type: string
          enum: [single, married, divorced, widowed]
          nullable: true
        custody:
          type: string
          enum: [mother, father, both]
          nullable: true
        parentalAuthority:
          type: string
          enum: [mother, father, both]
          nullable: true
        student:
          type: object
          properties:
            email:
              type: string
              format: email
            phone:
              type: string
          required: [email, phone]
        mother:
          type: object
          properties:
            dni_observe:
              type: string
              format: binary
              description: DNI observado, imagen requerida
            dni_reverse:
              type: string
              format: binary
              description: DNI invertido, imagen requerida
          required: [dni_observe, dni_reverse]
        father:
          type: object
          properties:
            dni_observe:
              type: string
              format: binary
              description: DNI observado, imagen requerida
            dni_reverse:
              type: string
              format: binary
              description: DNI invertido, imagen requerida
          required: [dni_observe, dni_reverse]
        guardian:
          type: object
          properties:
            email:
              type: string
              format: email
              nullable: true
            phone:
              type: string
              nullable: true
          required: []
    Alumn:
      type: object
      properties:
        nre:
          type: string
        dni_observe:
          type: string
          format: binary
        dni_reverse:
          type: string
          format: binary
        academic_record:
          type: array
          items:
            type: string
            format: binary
        healthcards_observe:
          type: string
          format: binary
        healthcards_reverse:
          type: string
          format: binary
      required:
        - nre
        - dni_observe
        - dni_reverse
        - healthcards_observe
        - healthcards_reverse
    FilesArray:
      type: array
      items:
        type: string
        format: binary
      description: Archivos relacionados con situaciones o registros. # Esto es ahora un array de archivos
    Mother:
      type: object
      properties:
        dni_observe:
          type: string
          format: binary
        dni_reverse:
          type: string
          format: binary
      required:
        - dni_observe
        - dni_reverse
    Father:
      type: object
      properties:
        dni_observe:
          type: string
          format: binary
        dni_reverse:
          type: string
          format: binary
      required:
        - dni_observe
        - dni_reverse
    Health:
      type: object
      properties:
        condition1:
          type: boolean
          description: Condición 1, por defecto es false
        condition2:
          type: boolean
          description: Condición 2, por defecto es false
        condition3:
          type: boolean
          description: Condición 3, por defecto es false
        condition4:
          type: boolean
          description: Condición 4, por defecto es false
        files:
          type: array
          items:
            type: string
            format: binary
          nullable: true
          description: Archivos relacionados con el estado de salud
    Confirm:
      type: object
      properties:
        information:
          type: boolean
          description: Campo para aceptar la información, por defecto es true
        publish:
          type: boolean
          description: Campo para aceptar la publicación, por defecto es true
        exit:
          type: boolean
          description: Campo para aceptar la salida, por defecto es true
        legal:
          type: boolean
          description: Campo para aceptar las condiciones legales, por defecto es true
        truthful:
          type: boolean
          description: Campo para confirmar la veracidad de la información, por defecto es true
        oficial:
          type: boolean
          description: Campo para aceptar que la información es oficial, por defecto es true
